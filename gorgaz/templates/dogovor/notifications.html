{% extends 'dogovor/base.html' %}
{% load static %}
{% block content %}
<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 flex-fill">
    {% if notifications %}
    <div class="table-responsive mt-4">
        <table class="table table-sm">
            <thead>
                <tr>
                    <th>Номер телефона</th>
                    <th>Ф.И.О.</th>
                    <th>Адрес</th>
                    <th>Вид</th>
                    <th>Время уведомления</th>
                </tr>
            </thead>
            <tbody>
            {% for item in notifications %}
            <tr data-id="{{ item.id }}" class="notify {% if item.send_time and item.success %}greenbg{% endif %} {% if item.send_time and not item.success %}redbg{% endif %}">
                <td data-id="{{ item.id }}">{% if item.dogovor_id.tel1 %}{{ item.dogovor_id.tel1 }}<br>{% endif %}
                    {% if item.dogovor_id.tel2 %}{{ item.dogovor_id.tel2 }}<br>{% endif %}
                    {% if item.dogovor_id.tel3 %}{{ item.dogovor_id.tel3 }}{% endif %}
                </td>
                <td data-id="{{ item.id }}">{{ item.dogovor_id.name | truncatechars:70}}</td>
                <td data-id="{{ item.id }}">{{ item.dogovor_id.address_city}}, {{item.dogovor_id.address_street}}, д.{{item.dogovor_id.address_house}}, кв.{{item.dogovor_id.address_kv}}</td>
                <td data-id="{{ item.id }}">{{ item.notify_type }}</td>
                <td data-id="{{ item.id }}">{% if item.send_time %}{{ item.send_time }}{% else %}-{% endif %}</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endif %}
</main>
{% endblock %}

{% block jsblock %}<script src="{% static 'js/main.js' %}"></script> {% endblock %}